\section{E-objects in categories with finite limits}
In this section we assume that $\cat{C}$ is a finitely complete category and
whenever we write a pullback, we assume that it is chosen. Recall that for
any morphism $f:A\to B$ in a category $\cat{C}$ with chosen pullbacks, there
is a functor
\begin{equation*}
f^\ast : \cat{C}/B\to\cat{C}/A.
\end{equation*}
As usual, when $g:X\to B$ is a morphism, we will write $f^\ast(X)$ for the
domain of $f^\ast(g)$. When there is more than one morphism $X\to B$ involved,
as will be the case below, we will write $\pullback{A}{X}{f}{g}$. The projections
will be written as $\pullbackpr{1}{f}{g}$ and $\pullbackpr{2}{f}{g}$. So in this notation, a
typical pullback diagram has the following form:
\begin{equation*}
\begin{tikzcd}[column sep=large]
\pullback{A}{X}{f}{g}
  \ar{r}{\pullbackpr{1}{f}{g}}
  \ar{d}[swap]{\pullbackpr{2}{f}{g}}
  &
A \ar{d}{f}
  \\
X \ar{r}[swap]{g}
  &
B
\end{tikzcd}
\end{equation*}
Also, when we have a commutative diagram of the form
\begin{equation*}
\begin{tikzcd}
A \ar{r}{f}
  \ar{d}{a}
  &
X \ar{d}
  & 
B \ar{l}[swap]{g}
  \ar{d}{b}
  \\
A'
  \ar{r}[swap]{f'}
  &
X'
  &
B'
  \ar{l}{g'}
\end{tikzcd}
\end{equation*}
we will denote the unique map from $\pullback{A}{B}{f}{g}$ to $\pullback{A'}{B'}{f'}{g'}$
such that the diagram
\begin{equation*}
\begin{tikzcd}
  {}
  & 
\pullback{A'}{B'}{f'}{g'}
  \ar{dd}
  \ar{rr}
  &
  &
B'
  \ar{dd}{g'}
  \\
\pullback{A}{B}{f}{g}
  \ar{dd}
  \ar[crossing over]{rr}
  \ar[dotted]{ur}{\pullback{a}{b}{f'}{g'}}
  &
  &
B \ar{ur}{b}
  \\
  {}
  &
A'
  \ar{rr}
  &
  &
X'
  \\
A \ar{rr}[swap]{f}
  \ar{ur}{a}
  &
  &
X \ar[crossing over,leftarrow]{uu}[near end,swap]{g}
  \ar{ur}
\end{tikzcd}
\end{equation*}
commutes, by $\pullback{a}{b}{f'}{g'}$. In the current work, we shall
write $A\times B$ for the pullback of $A\rightarrow 1\leftarrow B$, and
$\pi_1$ and $\pi_2$ for its projections (thus, no separate choice of
cartesian products is made).


\subsection{Extension objects}
\begin{defn}
A \emph{pre-extension object $\stesys$ in $\cat{C}$} consists of a \emph{fundamental structure}, which is a diagram of the form
\begin{equation*}
\begin{tikzcd}
\stesyst
  \ar{d}[swap]{\ebd}
  \\
\stesysf
  \ar{d}[swap]{\eft}
  \\
\stesysc
\end{tikzcd}
\end{equation*}
in $\cat{C}$ together with the \emph{context extension} and \emph{family extension} operations
\begin{align*}
\ectxext &:\stesysf\to \stesysc\\
\efamext & :\stesysff\to \stesysf,
\end{align*}
respectively, such that the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_2 
  \ar{r}{\efamext} 
  \ar{d}[swap]{\eft[1]} 
  & 
\stesysf 
  \ar{d}{\eft}
  \\
\stesysf
  \ar{r}[swap]{\eft} 
  & 
\stesysc
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{defn}
We introduce the following notation:
\begin{align*}
\stesysf_2 
  & := \stesysff
  \\
\eft[1] 
  & := \pullbackpr{1}{\ectxext}{\eft} : \stesysf_2\to\stesysf
  \\
\stesysf_3 & := \pullback{\stesysf_2}{\stesysf_2}{\efamext}{\eft[1]}
  \\
\eft[2]
  & := \pullbackpr{1}{\efamext}{\eft[1]} : \stesysf_3\to\stesysf_2.
\end{align*}
Then it follows that the outer square in the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_3
  \ar[dotted]{dr}{\eext{2}}
  \ar{rr}{\pullback{\pullbackpr{2}{\ectxext}{\eft}}{\pullbackpr{2}{\ectxext}{\eft}}{\ectxext}{\eft}}
  \ar{dd}[swap]{\eft[2]}
  & 
  &
\stesysf_2
  \ar{d}{\efamext}
  \\
  &
\stesysf_2
  \ar{d}[swap]{\eft[1]}
  \ar{r}{\pullbackpr{2}{\ectxext}{\eft}}
  &
\stesysf
  \ar{d}{\eft}
  \\
\stesysf_2
  \ar{r}[swap]{\eft[1]}
  &
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutes. We define $\eext{2}$ to be the unique morphism rendering the above diagram
commutative. Now we may continue to define
\begin{align*}
\stesysf_4 
  & := 
\pullback{\stesysf_3}{\stesysf_3}{\eext{2}}{\eft[2]}
  \\
\eft[3] 
  & := 
\pullbackpr{1}{\eext{2}}{\eft[2]}.
\end{align*}
Then we see that the outer square of the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_4
  \ar[dotted]{dr}{\eext{3}}
  \ar{rr}{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  \ar{dd}[swap]{\eft[3]}
  & 
  &
\stesysf_3
  \ar{d}{\eext{2}}
  \\
  &
\stesysf_3
  \ar{d}[swap]{\eft[2]}
  \ar{r}{\pullbackpr{2}{\efamext}{\eft[1]}}
  &
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysf_3
  \ar{r}[swap]{\eft[2]}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes,
so we may define $\eext{3}$ to be the unique map which renders the diagram. It
is straightforward to continue this process by induction, but we shall need not
go any further in this article.
\end{defn}

\begin{defn} An extension object is a pre-extension object $\stesys$ for which 
the diagrams
\begin{equation*}
\begin{tikzcd}
\stesysf_2 
  \ar{d}[swap]{\pullbackpr{2}{\ectxext}{\eft}} 
  \ar{r}{\efamext} 
  & 
\stesysf 
  \ar{d}{\ectxext}
  \\
\stesysf 
  \ar{r}[swap]{\ectxext} 
  & 
\stesysc
\end{tikzcd}
\qquad
\begin{tikzcd}
\stesysf_3
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{r}{\eext{2}}
  & 
\stesysf_2 
  \ar{d}{\efamext} 
  \\
\stesysf_2 
  \ar{r}[swap]{\efamext} 
  &
\stesysf
\end{tikzcd}
\end{equation*}
commute.
\end{defn}

\begin{comment}
\begin{lem}
There exists an isomorphism $\alpha$ such that the triangle
\begin{equation*}
\begin{tikzcd}[column sep=tiny]
\pullback{\stesysf}{\stesysf_2}{\ectxext}{\eft\circ\eft[1]}
  \ar[dotted]{rr}{\alpha}
  \ar{dr}[swap]{\pullback{\catid{\stesysf}}{\efamext}{\ectxext}{\eft}}
  &
  &
\stesysf_3
  \ar{dl}{\eext{2}}
  \\
& \stesysf_2
\end{tikzcd}
\end{equation*}
commutes
\end{lem}

\begin{proof}
There is a unique morphism $\alpha:
\pullback{\stesysf}{\stesysf_2}{\ectxext}{\eft\circ\eft[1]}\to\stesysf_3$
rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\pullback{\stesysf}{\stesysf_2}{\ectxext}{\eft\circ\eft[1]}
  \ar[bend left=10,yshift=.5ex]{drrr}{\pullbackpr{2}{\ectxext}{\eft}\circ\pullbackpr{2}{\ectxext}{\eft\circ\eft[1]}}
  \ar[bend right=10]{ddr}[swap]{\pullback{\catid{\stesysf}}{\eft[1]}{\ectxext}{\eft}}
  \ar[dotted]{dr}{\alpha}
  \\
& \stesysf_3
  \ar{r}{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{d}{\eft[2]}
  &
\stesysf_2
  \ar{d}[swap]{\eft[1]}
  \ar{r}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
  &
\stesysf
  \ar{d}{\eft}
  \\
{} & \stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
\end{proof}
\end{comment}

\begin{defn}
Suppose $\stesys$ is a pre-extension object of $\cat{C}$. Then we define the pre-extension object
$\famesys{\stesys}$ to consist of the fundamental structure
\begin{equation*}
\begin{tikzcd}
\stesyst_2
  \ar{d}{\ebd[1]}
  \\
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysf
\end{tikzcd}
\end{equation*}
where
\begin{align*}
\stesyst_2 
  & := \pullback{\stesysf}{\stesyst}{\ectxext}{\eft\circ\ebd}
  \\
\ebd[1]
  & := \ectxext^\ast(\ebd),
\end{align*}
with the extension operations
\begin{align*}
\efamext 
  & 
  : \stesysf_2\to\stesysf\\
\eext{2} & : \stesysf_3\to\stesysf_2.
\end{align*}
\end{defn}

In \autoref{famextobj} below we shall show that $\famesys{\stesys}$ is an
extension algebra whenever $\stesys$ is an extension algebra. We shall need
a handful of lemmas to give the proof.

\begin{defn}
We define
\begin{align*}
\beta_1 
  & := 
\pullbackpr{2}{\ectxext}{\eft}
  & &
  : \stesysf_2\to\stesysf
  \\
\beta_2
  & :=
\pullback{\beta_1}{\beta_1}{\ectxext}{\eft}
  & &
  : \stesysf_3\to\stesysf_2
  \\
\beta_3
  & :=
\pullback{\beta_2}{\beta_2}{\efamext}{\eft[1]}
  & &
  : \stesysf_4\to\stesysf_3.
\end{align*}
\end{defn}

\begin{lem}
Let $\stesys$ be a pre-extension object. Then the square
\begin{equation*}
\begin{tikzcd}[column sep=10em]
\stesysf_4
  \ar{r}{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  \ar{d}[swap]{\beta_3}
  &
\stesysf_3
  \ar{d}{\beta_2}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
commutes.
\end{lem}

\begin{proof}
Left to the reader.
\end{proof}

\begin{comment}
\begin{proof}
It is straightforward to verify the equalities
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ\beta_2\circ
  (\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]})
  & =
\pullbackpr{1}{\ectxext}{\eft}\circ\beta_2\circ\beta_3
  \\
\pullbackpr{2}{\ectxext}{\eft}\circ\beta_2\circ
  (\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]})
  & =
\pullbackpr{2}{\ectxext}{\eft}\circ\beta_2\circ\beta_3.\qedhere
\end{align*}
\end{proof}
\end{comment}

Note that the square
\begin{equation*}
\begin{tikzcd}
\stesysf_3
  \ar{r}{\beta_2}
  \ar{d}[swap]{\eext{2}}
  &
\stesysf_2
  \ar{d}{\efamext}
  \\
\stesysf_2
  \ar{r}[swap]{\beta_1}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes by definition. We have a similar result relating $\eext{3}$ and
$\eext{2}$.

\begin{lem}
Let $\stesys$ be a pre-extension object. Then the square
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{r}{\beta_3}
  \ar{d}[swap]{\eext{3}}
  &
\stesysf_3
  \ar{d}{\eext{2}}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
commutes.
\end{lem}

\begin{proof}
Left to the reader.
\end{proof}
\begin{comment}
\begin{proof}
It is straightforward to verify the equalities
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ\beta_2\circ\eext{3}
  & = \beta_1\circ\eft[2]\circ\eft[3]
  \\
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\beta_3
  & = \beta_1\circ\eft[2]\circ\eft[3].
\end{align*}
Thus, it remains to verify that
\begin{equation*}
\pullbackpr{2}{\ectxext}{\eft}\circ\beta_2\circ\eext{3}
  = \pullbackpr{2}{\ectxext}{\eft}\circ\eext{2}\circ\beta_3.
\end{equation*}
It is straightforward to see that the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_4
  \ar{dd}[swap]{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  \ar{r}{\eext{3}}
  &
\stesysf_3
  \ar{r}{\beta_2}
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  &
\stesysf_2
  \ar{dd}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
  {} &
\stesysf_2
  \ar{dr}{\beta_1}
  \\
\stesysf_3
  \ar{ur}{\eext{2}}
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes. It is likewise straightforward to see that the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{r}{\beta_3}
  \ar{d}[swap]{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  &
\stesysf_3
  \ar{r}{\eext{2}}
  \ar{d}[swap]{\beta_2}
  &
\stesysf_2
  \ar{d}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes, completing our goal.
\end{proof}
\end{comment}

\begin{thm}[Local extension structure]\label{famextobj}
If $\stesys$ is an extension object, then so is $\famesys{\stesys}$.
\end{thm}

\begin{proof}
Note that the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_3
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{r}{\eext{2}}
  & 
\stesysf_2 
  \ar{d}{\efamext} 
  \\
\stesysf_2 
  \ar{r}[swap]{\efamext} 
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes by assumption. For the second condition, we have to show that the
diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{d}[swap]{\pullbackpr{2}{\eext{2}}{\eft[2]}}
  \ar{r}{\eext{3}}
  & 
\stesysf_3
  \ar{d}{\eext{2}} 
  \\
\stesysf_3
  \ar{r}[swap]{\eext{2}} 
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
Since this is a question about two maps into a pullback, it suffices to verify
that
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\eext{3}
  & =
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\pullbackpr{2}{\eext{2}}{\eft[2]}
  \\
\pullbackpr{2}{\ectxext}{\eft}\circ\eext{2}\circ\eext{3}
  & =
\pullbackpr{2}{\ectxext}{\eft}\circ\eext{2}\circ\pullbackpr{2}{\eext{2}}{\eft[2]}.
\end{align*}
For the first equality, it is fairly straightforward to show that both the
equalities
\begin{equation*}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\eext{3}
  =
\eft[1]\circ\eft[2]\circ\eft[3]
\end{equation*}
and
\begin{equation*}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\pullbackpr{2}{\eext{2}}{\eft[2]}
  =
\eft[1]\circ\eft[2]\circ\eft[3].
\end{equation*}
hold. For the second subgoal (which is more tricky). Notice first that the
diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{r}{\eext{3}}
  \ar{d}[swap]{\beta_3}
  &
\stesysf_3
  \ar{r}{\eext{2}}
  \ar{d}[swap]{\beta_2}
  &
\stesysf_2
  \ar{d}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
\stesysf_3
  \ar{r}[swap]{\eext{2}}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes. We also have the commutative diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_4
  \ar{r}{\pullbackpr{2}{\eext{2}}{\eft[2]}}
  \ar{d}[swap]{\beta_3}
  &
\stesysf_3
  \ar{r}{\eext{2}}
  \ar{d}[swap]{\beta_2}
  &
\stesysf_2
  \ar{d}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
\stesysf_3
  \ar{r}{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{dr}[swap]{\eext{2}}
  &
\stesysf_2
  \ar{r}{\efamext}
  &
\stesysf
  \\
  {} &
\stesysf_2
  \ar{ur}[swap]{\efamext}
\end{tikzcd}
\end{equation*}
completing the proof.
\end{proof}

\subsection{(Pre-)extension homomorphisms}\label{subsection:e_extension_homomorphisms}
In this subsection we start with the study of pre-extension homomorphisms, which
will include the extension homomorphisms since they will be the pre-extension
homomorphisms of which both the domain and codomain are extension objects.
Our main examples of extension homomorphisms will be the operations of weakening
and substitution. There are some basic examples of pre-extension homomorphisms
that will be useful too, which get introduced in the this section and in
\autoref{subsection:change_of_base}. In this section, we will mainly be
interested in pre-extension homomorphisms between local pre-extension objects.
We will end this section by proving that a retract of an extension object is
always an extension object.

\begin{defn}
Let $\stesys$ and $\stesys'$ be pre-extension algebras. A \emph{pre-extension 
homomorphism $f$ from $\stesys$ to $\stesys'$} is a triple $(f_0,f_1,f^t)$ 
consisting of morphisms
\begin{equation*}
\begin{tikzcd}
\stesyst 
  \ar{r}{f^t}
  \ar{d}[swap]{\ebd}
  &
\stesyst'
  \ar{d}{\ebd'}
  \\
\stesysf 
  \ar{r}{f_1}
  \ar{d}[swap]{\eft}
  &
\stesysf'
  \ar{d}{\eft'}
  \\
\stesysc 
  \ar{r}[swap]{f_0}
  &
\stesysc'
\end{tikzcd}
\end{equation*}
such that the indicated squares commute, for which furthermore the squares
\begin{equation*}
\begin{tikzcd}
\stesysf \ar{r}{f_1}
  \ar{d}[swap]{\ectxext}
  &
\stesysf'
  \ar{d}{\ectxext'}
  \\
\stesysc
  \ar{r}[swap]{f_0}
  &
\stesysc'
\end{tikzcd}
\end{equation*}
and
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf\times_{\ectxext,\eft} \stesysf
  \ar{r}{f_1\times_{\ectxext',\eft'} f_1}
  \ar{d}[swap]{\efamext}
  &
\stesysf'\times_{\ectxext',\eft'} \stesysf'
  \ar{d}{\efamext'}
  \\
\stesysf
  \ar{r}[swap]{f_1}
  &
\stesysf'
\end{tikzcd}
\end{equation*}
Composition and the identity homomorphism are defined in the expected way. We
define furthermore
\begin{align*}
f_2 & := \pullback{f_1}{f_1}{\ectxext'}{\eft'}
  \\
f_3 & := \pullback{f_2}{f_2}{\efamext'}{\eft[1]'}.
\end{align*}
\end{defn}

\begin{defn}
A pre-extension homomorphism between extension objects is called an extension
homomorphism.
\end{defn}

\begin{lem}
Let $\stesys$ be an extension object. Then
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesyst_2
  \ar{r}{\pullbackpr{2}{\ectxext}{\eft\circ\ebd}}
  \ar{d}[swap]{\ebd[1]}
  &
\stesyst
  \ar{d}{\ebd}
  \\
\stesysf_2
  \ar{r}{\pullbackpr{2}{\ectxext}{\eft}}
  \ar{d}[swap]{\eft[1]}
  &
\stesysf
  \ar{d}{\eft}
  \\
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
assembles an extension homomorphism $\mathbf{e}_0:\famesys{\stesys}\to\stesys$.
Likewise, we have an extension homomorphism
$\mathbf{e}_1:\famesys{\famesys{\stesys}}\to\famesys{\stesys}$. Thus, a
pre-extension object is an extension object if and only if $\mathbf{e}_0$
and $\mathbf{e}_1$ are pre-extension homomorphisms.
\end{lem}

\begin{proof}
Immediate from the conditions of being an extension object.
\end{proof}

\begin{defn}
Let $\stesys$ be a pre-extension object. Then
\begin{equation*}
\begin{tikzcd}
\stesyst_3
  \ar{r}{\beta^t}
  \ar{d}[swap]{\ebd[2]}
  &
\stesyst_2
  \ar{d}{\ebd[1]}
  \\
\stesysf_3
  \ar{r}{\beta_2}
  \ar{d}[swap]{\eft[2]}
  &
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysf_2
  \ar{r}[swap]{\beta_1}
  &
\stesysf
\end{tikzcd}
\qquad
\text{and}
\qquad
\begin{tikzcd}
\stesyst_4
  \ar{r}{\beta^t_2}
  \ar{d}[swap]{\ebd[3]}
  &
\stesyst_3
  \ar{d}{\ebd[2]}
  \\
\stesysf_4
  \ar{r}{\beta_3}
  \ar{d}[swap]{\eft[3]}
  &
\stesysf_3
  \ar{d}{\eft[2]}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
assemble pre-extension homomorphisms 
\(
\boldsymbol{\beta}
  :
\famesys{\famesys{\stesys}}
  \to
\famesys{\stesys}
\) 
and
\(
\boldsymbol{\beta}_\mathbf{2}
  :
\famesys{\famesys{\famesys{\stesys}}}
  \to
\famesys{\famesys{\stesys}}
\).
\end{defn}

\begin{defn}\label{famehom}
Suppose that $f:\stesys'\to\stesys$ is a pre-extension homomorphism. Then we
define $\famehom{f}:\famesys{\stesys'}\to\famesys{\stesys}$ to consist of
\begin{equation*}
\begin{tikzcd}
\stesyst_2'
  \ar{r}{f^t_2}
  \ar{d}[swap]{\ebd[1]'}
  &
\stesyst_2
  \ar{d}{\ebd[1]}
  \\
\stesysf_2'
  \ar{r}{f_2}
  \ar{d}[swap]{\eft[1]'}
  &
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysf'
  \ar{r}[swap]{f_1}
  &
\stesysf
\end{tikzcd}
\end{equation*}
where we define
\begin{equation*}
f^t_2 := \pullback{f_1}{f^t}{\ectxext}{\eft\circ\ebd}.
\end{equation*}
\end{defn}

\begin{lem}
The triple $\famehom{f}$ defined in \autoref{famehom} is a pre-extension homomorphism.
\end{lem}

\begin{proof}
Note that the square
\begin{equation*}
\begin{tikzcd}
\stesysf_2'
  \ar{r}{f_2}
  \ar{d}[swap]{\efamext'}
  &
\stesysf_2
  \ar{d}{\efamext}
  \\
\stesysf'
  \ar{r}[swap]{f_1}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes by assumption. Thus, it remains to show that the square
\begin{equation*}
\begin{tikzcd}
\stesysf_3'
  \ar{r}{f_3}
  \ar{d}[swap]{\eext{2}'}
  &
\stesysf_3
  \ar{d}{\eext{2}}
  \\
\stesysf_2'
  \ar{r}[swap]{f_2}
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
commutes. It is equivalent to show that the equalities
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ f_2\circ\eext{2}'
  & =
\pullbackpr{1}{\ectxext}{\eft}\circ \eext{2}\circ f_3
  \\
\pullbackpr{2}{\ectxext}{\eft}\circ f_2\circ\eext{2}'
  & =
\pullbackpr{2}{\ectxext}{\eft}\circ \eext{2}\circ f_3
\end{align*}
both hold. For the first, it is straightforward to verify that the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
{} &
\stesysf_2'
  \ar{r}{f_2}
  \ar{dr}[near end]{\pullbackpr{1}{\ectxext'}{\eft'}}
  &
\stesysf_2
  \ar{dr}{\pullbackpr{1}{\ectxext}{\eft}}
  \\
\stesysf_3'
  \ar{ur}{\eext{2}'}
  \ar{r}[swap]{\beta_2'}
  \ar{ddr}[swap]{f_3}
  &
\stesysf_2'
  \ar{r}{\efamext'}
  \ar{dr}[swap]{f_2}
  &
\stesysf'
  \ar{r}{f_1}
  &
\stesysf
  \\
{} & {} &
\stesysf_2
  \ar{ur}[near start]{\efamext}
  \\
{} &
\stesysf_3
  \ar{r}[swap]{\eext{2}}
  \ar{ur}{\beta_2}
  &
\stesysf_2
  \ar{uur}[swap]{\pullbackpr{1}{\ectxext}{\eft}}
\end{tikzcd}
\end{equation*}
commutes. For the second, note that the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
{} &
\stesysf_2'
  \ar{r}{f_2}
  \ar{dr}{\beta_1'}
  &
\stesysf_2
  \ar{ddr}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
{} & {} &
\stesysf'
  \ar{dr}[swap,near start]{f_1}
  \\
\stesysf_3'
  \ar{uur}{\eext{2}'}
  \ar{r}{\beta_2'}
  \ar{dr}[swap]{f_3}
  &
\stesysf_2'
  \ar{r}{f_2}
  \ar{ur}{\efamext'}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
  \\
{} &
\stesysf_3
  \ar{r}[swap]{\eext{2}}
  \ar{ur}[near start]{\beta_2}
  &
\stesysf_2
  \ar{ur}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
\end{tikzcd}
\end{equation*}
commutes.
\end{proof}

\begin{lem}[Stability under retracts]\label{esys-retract}
Suppose $f:\stesys\to\stesys'$ is a pre-extension homomorphism between
pre-extension objects. If there is a pre-extension homomorphism $g:\stesys'\to
\stesys$ such that $g\circ f=\catid{\stesys}$ and $\stesys'$ is an extension
algebra, then $\stesys$ is an extension algebra.
\end{lem}

Before we start with the proof, note that we have the equalities
$g_2\circ f_2=\catid{\stesysf_2}$ and $g_3\circ f_3=\catid{\stesysf_3}$
under the hypotheses of the lemma.

\begin{proof}
Our first subgoal is to show that the square
\begin{equation*}
\begin{tikzcd}
\stesysf_2 
  \ar{r}{\efamext} 
  \ar{d}[swap]{\pullbackpr{2}{\ectxext}{\eft}} 
  & 
\stesysf 
  \ar{d}{\ectxext}
  \\
\stesysf
  \ar{r}[swap]{\ectxext} 
  & 
\stesysc
\end{tikzcd}
\end{equation*}
commutes. Note that in the diagram
\begin{equation*}
\begin{tikzcd}
  {}
  & 
\stesysf
  \ar{dd}[near start]{\ectxext}
  \ar{rr}{f_1}
  &
  &
\stesysf'
  \ar{dd}[near start]{\ectxext'}
  \ar{rr}{g_1}
  &
  &
\stesysf
  \ar{dd}{\ectxext}
  \\
\stesysf_2
  \ar{dd}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
  \ar[crossing over]{rr}[swap,near start]{f_2}
  \ar{ur}{\efamext}
  &
  &
\stesysf_2'
  \ar{ur}[near start]{\efamext'}
  \ar[crossing over]{rr}[swap,near start]{g_2}
  &
  &
\stesysf_2
  \ar{ur}[swap,near start]{\efamext}
  \\
  {}
  &
\stesysc
  \ar{rr}[near start]{f_0}
  &
  &
\stesysc'
  \ar{rr}[near start]{g_0}
  &
  &
\stesysc
  \\
\stesysf 
  \ar{rr}[swap]{f_1}
  \ar{ur}{\ectxext}
  &
  &
\stesysf' 
  \ar[crossing over,leftarrow]{uu}[near end,swap]{\pullbackpr{2}{\ectxext'}{\eft'}}
  \ar{ur}[swap,near end]{\ectxext'}
  \ar{rr}[swap]{g_1}
  &
  &
\stesysf
  \ar[crossing over,leftarrow]{uu}[near end,swap]{\pullbackpr{2}{\ectxext}{\eft}}
  \ar{ur}[swap]{\ectxext}
\end{tikzcd}
\end{equation*}
all the faces minus the far left and far right face commute. Using that $g$
is a section of $f$, we can read off that also the far left face commutes,
completing our first subgoal.
 
For the second subgoal, note that also $\famehom{g}\circ\famehom{f}=
\catid{\famesys{\stesys}}$ and that $\famesys{\stesys'}$ is an extension object.
Thus we can apply what we have proven so far to conclude that the square
\begin{equation*}
\begin{tikzcd}
\stesysf_3 
  \ar{r}{\eext{2}} 
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}} 
  & 
\stesysf_2 
  \ar{d}{\efamext}
  \\
\stesysf_2
  \ar{r}[swap]{\efamext} 
  & 
\stesysf
\end{tikzcd}
\end{equation*}
commutes.
\end{proof}

\subsection{The change of base of (pre-)extension objects}
\label{subsection:change_of_base}
An important construction of (pre-)extension objects is the change of base. It
allows us to consider `parametrized homomorphisms', such as weakening and
substitution.

\begin{defn}
Suppose $f:\stesys\to\stesys'$ is a pre-extension homomorphism. We say that
a diagram
\begin{equation*}
\begin{tikzcd}
\stesys
  \ar{r}{f}
  \ar{d}[swap]{p}
  &
\stesys'
  \ar{d}{p'}
  \\
X \ar{r}[swap]{g}
  &
Y
\end{tikzcd}
\end{equation*}
commutes if the diagram
\begin{equation*}
\begin{tikzcd}
\stesysc
  \ar{r}{f_0}
  \ar{d}[swap]{p}
  &
\stesysc'
  \ar{d}{p'}
  \\
X \ar{r}[swap]{g}
  &
Y
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

The first goal in this subsection is to define for every (pre-)extension object 
$\stesys$ and every $p:\stesysc\rightarrow X\leftarrow Y:g$, a (pre-)extension
object $\cobesys{Y}{\stesys}{g}{p}$ with a homomorphism $\pullbackpr{2}{g}{p}:
\cobesys{Y}{\stesys}{g}{p}\to\stesys$ and a morphism $\pullbackpr{1}{g}{p}:
\pullback{Y}{\stesysc}{g}{p}\to Y$ such that for every diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesys'
  \ar[bend right=10]{ddr}[swap]{p'}
  \ar[bend left=10]{rrd}{f}
  \ar[dotted]{dr}[near end]{[p',f]}
  \\
  {}&
\cobesys{Y}{\stesys}{g}{p}
  \ar{d}{\pullbackpr{1}{g}{p}}
  \ar{r}[swap]{\pullbackpr{2}{g}{p}}
  &
\stesys
  \ar{d}{p}
  \\
  {}&
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
of which the outer square commutes, the (pre-)extension homomorphism $[p',f]$ exists
and is unique with the property that it renders the diagram commutative. We will
give the definition of $\cobesys{Y}{\stesys}{g}{p}$ in \autoref{cobesys}. After
proving that the change of base of a pre-extension algebra is indeed a
pre-extension algebra (\autoref{cobesys-preext}) and that the change of base
of an extension algebra is an extension algebra (\autoref{cobesys-ext}), we
will demonstrate the above unique existence in \autoref{cobesys-existence,%
cobesys-pullback}.

The second goal in this subsection is to follow the same procedure for
$\famesys{\famesys{\stesys}}$ to show that it is equivalent to
$\cobesys{\stesysf}{\famesys{\stesys}}{\ectxext}{\eft}$. We will do this by
verifying directly that it has the universal property of the change of base
described above, because we will use the ingredients in our definition of
weakening and substitution objects.

\begin{defn}[Change of base]\label{cobesys}
Suppose $\stesys$ is a pre-extension object in $\cat{C}$ and that 
$p:\stesysc\rightarrow X\leftarrow Y:g$.
Then we define the pre-extension object $\cobesys{Y}{\stesys}{g}{p}$ to consist of
\begin{equation*}
\begin{tikzcd}
\cobesys{Y}{\stesyst}{g}{p\circ\eft\circ\ebd}
  \ar{r}
  \ar{d}[swap]{g^\ast(\ebd)}
  &
\stesyst
  \ar{d}{\ebd}
  \\
\cobesys{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}
  \ar{d}[swap]{g^\ast(\eft)}
  &
\stesysf
  \ar{d}{\eft}
  \\
\cobesys{Y}{\stesysc}{g}{p}
  \ar{r}
  \ar{d}[swap]{\pullbackpr{1}{g}{p}}
  &
\stesysc
  \ar{d}{p}
  \\
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*} 
and the operations
\begin{align*}
\cobesys{Y}{\ectxext}{g}{p} 
  & : \pullback{Y}{\stesysf}{g}{p\circ\eft}\to \pullback{Y}{\stesysc}{g}{p}\\
\cobesys{Y}{\efamext}{g}{p} 
  & : \pullback
    {\pullback{Y}{\stesysf}{g}{p\circ\eft}}
    {\pullback{Y}{\stesysf}{g}{p\circ\eft}}
    {\cobesys{Y}{\ectxext}{g}{p}}
    {g^\ast(\eft)}
  \to 
  \pullback{Y}{\stesysf}{g}{p\circ\eft}.
\end{align*}
defined by
\begin{equation*}
\cobesys{Y}{\ectxext}{g}{p} := \pullback{\catid{Y}}{\ectxext}{g}{p}
\end{equation*}
and where $\cobesys{Y}{\efamext}{g}{p}$ is defined by rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
(\cobesys{Y}{\stesysf}{g}{p\circ\eft})_2
  \ar{rr}{\pullback{\pullbackpr{2}{g}{p\circ\eft}}{\pullbackpr{2}{g}{p\circ\eft}}{\ectxext}{\eft}}
  \ar{dd}[swap]{\pullbackpr{1}{\cobesys{Y}{\ectxext}{g}{p}}{g^\ast(\eft)}}
  \ar[dotted]{dr}[swap]{\cobesys{Y}{\efamext}{g}{p}}
  &
  &
\stesysf_2
  \ar{d}{\efamext}
  \\
  {}&
\cobesys{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}{\pullbackpr{2}{g}{p\circ\eft}}
  \ar{d}[swap]{\pullbackpr{1}{g}{p\circ\eft}}
  &
\stesysf
  \ar{d}{p\circ\eft}
  \\
\cobesys{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{\pullbackpr{1}{g}{p\circ\eft}}
  &
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*} 
commutative. 
The process of obtaining the pre-extension object $\cobesys{Y}{\stesys}{g}{p}$ out of $\stesys$
and $g:Y\to X$ is also called the \emph{change of base}.
\end{defn}

\begin{lem}\label{cobesys-preext}
Any change of base of a pre-extension object is a pre-extension object.
\end{lem}

\begin{proof}
Let $\stesys$ be an extension algebra and consider $p:\stesysc\rightarrow X\leftarrow Y:g$.
We need to verify that the square
\begin{equation*}
\begin{tikzcd}[column sep=large]
(\pullback{Y}{\stesysf}{g}{p\circ\eft})_2
  \ar{r}{\cobesys{Y}{\efamext}{g}{p}} 
  \ar{d}[swap]{\pullbackpr{1}{\cobesys{Y}{\ectxext}{g}{p}}{g^\ast(\eft)}} 
  & 
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{d}{g^\ast(\eft)}
  \\
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{g^\ast(\eft)} 
  & 
\pullback{Y}{\stesysc}{g}{p}
\end{tikzcd}
\end{equation*}
commutes. It is fairly obvious that
\begin{equation*}
\pullbackpr{1}{g}{p}\circ g^\ast(\eft)\circ (\cobesys{Y}{\efamext}{g}{p})
  =
\pullbackpr{1}{g}{p\circ\eft}\circ \pullbackpr{1}{\cobesys{Y}{\ectxext}{g}{p}}{g^\ast(\eft)}
\end{equation*}
and that the diagram
\begin{equation*}
\begin{tikzcd}
  {}&
  {}&
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{rr}{g^\ast(\eft)}
  \ar{dr}[swap]{\pullbackpr{2}{g}{p\circ\eft}}
  &
  {}&
\pullback{Y}{\stesysc}{g}{p}
  \ar{ddr}{\pullbackpr{2}{g}{p}}
  \\
  {}&
  {}&
  {}&
\stesysf
  \ar{drr}[swap]{\eft}
  \\
(\pullback{y}{\stesysf}{g}{p\circ\eft})_2
  \ar{uurr}{\cobesys{Y}{\efamext}{g}{p}}
  \ar{rr}[swap,yshift=-.5ex]{\pullback{\pullbackpr{2}{g}{p\circ\eft}}{\pullbackpr{2}{g}{p\circ\eft}}{\ectxext}{\eft}}
  \ar{ddrr}[swap]{\pullbackpr{1}{\cobesys{Y}{\ectxext}{g}{p}}{g^\ast(\eft)}}
  &
  {}&
\stesysf_2
  \ar{ur}{\efamext}
  \ar{dr}[swap]{\eft[1]}
  &
  {}&
  {}&
\stesysc
  \\
  {}&
  {}&
  {}&
\stesysf
  \ar{urr}{\eft}
  \\
  {}&
  {}&
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{rr}[swap]{g^\ast(\eft)}
  \ar{ur}{\pullbackpr{2}{g}{p\circ\eft}}
  &
  {}&
\pullback{Y}{\stesysc}{g}{p}
  \ar{uur}[swap]{\pullbackpr{2}{g}{p}}
\end{tikzcd}
\end{equation*}
commutes.
\end{proof}

\begin{thm}\label{cobesys-ext}
The change of base of an extension algebra is an extension algebra.
\end{thm}

\begin{proof}
Our first subgoal is to verify that the square
\begin{equation*}
\begin{tikzcd}[column sep=large]
(\pullback{Y}{\stesysf}{g}{p\circ\eft})_2
  \ar{r}{\cobesys{Y}{\efamext}{g}{p}} 
  \ar{d}[swap]{\pullbackpr{2}{\cobesys{Y}{\ectxext}{g}{p}}{g^\ast(\eft)}} 
  & 
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{d}{\cobesys{Y}{\ectxext}{g}{p}}
  \\
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{\cobesys{Y}{\ectxext}{g}{p}} 
  & 
\pullback{Y}{\stesysc}{g}{p}
\end{tikzcd}
\end{equation*}
\end{proof}

The following construction is useful for defining extension homomorphisms into
`higher' extension objects

\begin{defn}\label{cobesys-existence}
Consider a commutative diagram
\begin{equation*}
\begin{tikzcd}
\stesys'
  \ar{r}{f}
  \ar{d}[swap]{p'}
  &
\stesys
  \ar{d}{p}
  \\
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
Then we construct $[p,f]:\stesys'\to\cobesys{Y}{\stesys}{g}{p}$
\begin{itemize}
\item by defining $[p,f]_0:\stesysc'\to\pullback{Y}{\stesysc}{g}{p}$ be the uniqe
morphism rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysc'
  \ar[bend right=10]{ddr}[swap]{p'}
  \ar[bend left=10]{rrd}{f_0}
  \ar{dr}[near end]{[p,f]_0}
  \\
  {}&
\pullback{Y}{\stesysc}{g}{p}
  \ar{r}[swap]{\pullbackpr{2}{g}{p}}
  \ar{d}{\pullbackpr{1}{g}{p}}
  &
\stesysc
  \ar{d}{p}
  \\
  {}&
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
commutative.
\item by defining $[p,f]_1:\stesysf'\to\pullback{Y}{\stesysf}{g}{p\circ\eft}$ be the uniqe
morphism rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=huge]
\stesysf'
  \ar[bend right=10]{ddr}[swap]{p'\circ\eft'}
  \ar[bend left=10]{rrd}{f_1}
  \ar{dr}[near end]{[p,f]_1}
  \\
  {}&
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{\pullbackpr{2}{g}{p\circ\eft}}
  \ar{d}{\pullbackpr{1}{g}{p\circ\eft}}
  &
\stesysc
  \ar{d}{p\circ\eft}
  \\
  {}&
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
commutative.
\item by defining $[p,f]^t:\stesyst'\to\pullback{Y}{\stesyst}{g}{p\circ\eft\circ\ebd}$ be the uniqe
morphism rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=huge]
\stesyst'
  \ar[bend right=10]{ddr}[swap]{p'\circ\eft'\circ\ebd'}
  \ar[bend left=10]{rrd}{f^t}
  \ar{dr}[near end]{[p,f]^t}
  \\
  {}&
\pullback{Y}{\stesysf}{g}{p\circ\eft\circ\ebd}
  \ar{r}[swap]{\pullbackpr{2}{g}{p\circ\eft\circ\ebd}}
  \ar{d}{\pullbackpr{1}{g}{p\circ\eft\circ\ebd}}
  &
\stesysc
  \ar{d}{p\circ\eft\circ\ebd}
  \\
  {}&
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
commutative.
\end{itemize}
\end{defn}

\begin{thm}\label{cobesys-pullback}
For every diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesys'
  \ar[bend right=10]{ddr}[swap]{p'}
  \ar[bend left=10]{rrd}{f}
  \ar[dotted]{dr}[near end]{[p',f]}
  \\
  {}&
\cobesys{Y}{\stesys}{g}{p}
  \ar{d}{\pullbackpr{1}{g}{p}}
  \ar{r}[swap]{\pullbackpr{2}{g}{p}}
  &
\stesys
  \ar{d}{p}
  \\
  {}&
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
of which the outer square commutes, the pre-extension homomorphism $[p',f]$
is unique with the property that it renders the whole diagram commutative.
\end{thm}

\begin{defn}\label{famfamstesys_into}
Consider a commutative square
\begin{equation*}
\begin{tikzcd}
\stesys'
  \ar{r}{f}
  \ar{d}[swap]{p}
  &
\famesys\stesys
  \ar{d}{\eft}
  \\
\stesysf \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
Then we construct
\begin{equation*}
|[p,f]|:\stesys'\to\famesys{\famesys{\stesys}}
\end{equation*}
as follows:
\begin{itemize}
\item let $|[p,f]|_0:\stesysc'\to\stesysf_2$ be the unique morphism rendering
the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysc' 
  \ar[bend left=10]{rrd}{f_0}
  \ar[swap,bend right=10]{ddr}{p}
  \ar[dotted]{dr}[near end]{|[p,f]|_0}
  \\
  {}&
\stesysf_2
  \ar{r}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
  \ar{d}{\eft[1]}
  &
\stesysf
  \ar{d}{\eft}
  \\
  {}&
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutative.
\item Let $|[p,f]|_1:\stesysf'\to\stesysf_3$ be the unique morphism rendering
the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf'
  \ar[bend left=10]{drr}{f_1}
  \ar[swap]{dd}{\eft'}
  \ar[dotted]{dr}[near end]{|[p,f]|_1}
  \\
  {}&
\stesysf_3
  \ar{r}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{d}{\eft[1]}
  &
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysc'
  \ar{r}[swap]{|[p,f]|_0}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutative.
\item Let $|[p,f]|^t:\stesyst'\to\stesyst_3$ be the unique morphism rendering
the diagram
\begin{equation*}
\begin{tikzcd}[column sep=huge]
\stesyst'
  \ar[bend left=10]{drr}{f^t}
  \ar[swap]{dd}{\eft'\circ\ebd'}
  \ar[dotted]{dr}[near end]{|[p,f]|^t}
  \\
  {}&
\stesyst_3
  \ar{r}[swap]{\pullbackpr{2}{\efamext}{\eft[1]\circ\ebd[1]}}
  \ar{d}[swap]{\pullbackpr{1}{\efamext}{\eft[1]\circ\ebd[1]}}
  &
\stesyst_2
  \ar{d}{\eft[1]\circ\ebd[1]}
  \\
\stesysc'
  \ar{r}[swap]{|[p,f]|_0}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutative.
\end{itemize}
\end{defn}

\begin{lem}
Under the hypotheses of \autoref{famfamstesys_into}, $|[p,f]|$ is a pre-extension
homomorphism. Moreover, it is the unique pre-extension homomorphism for which
the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesys' 
  \ar[bend left=10]{rrd}{f}
  \ar[swap,bend right=10]{ddr}{p}
  \ar[dotted]{dr}[near end]{|[p,f]|}
  \\
  {}&
\famesys{\famesys{\stesys}}
  \ar{r}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
  \ar{d}{\eft[1]}
  &
\famesys{\stesys}
  \ar{d}{\eft}
  \\
  {}&
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutes.
\end{lem}

\begin{lem}
Suppose $f:\stesys\to \stesys'$ is a pre-extension homomorphism and consider a morphism
$p:\stesys'\to X$ and $g:Y\to X$. Then the change of base 
$g^\ast(f):\cobesys{Y}{\stesys}{g}{p\circ f_0}\to
\cobesys{Y}{\stesys'}{g}{p}$ is a pre-extension morphism.
\end{lem}

\begin{lem}
Let $\stesys$ be a pre-extension algebra and consider $p:\stesysc\rightarrow X\leftarrow Y:g$.
Then there is an isomorphism
\begin{equation*}
\varphi:\famesys{\cobesys{Y}{\stesys}{g}{p}}
  \simeq
\cobesys{Y}{\famesys{\stesys}}{g}{p\circ\eft}
\end{equation*}
uniquely determined by
\end{lem}

\begin{proof}
This follows from the pasting lemma for pullbacks.
\end{proof}

\subsection{Pre-weakening objects}
\begin{defn}
Let $\stesys$ be an extension object in $\cat{C}$. A pre-weakening operation
on $\stesys$ is an extension homomorphism 
$ \mathbf{w}(\stesys)
    :
  \cobesys{\stesysf}{\famesys{\stesys}}{\eft}{\eft}
    \to
  \famesys{\famesys{\stesys}}$
for which the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\cobesys{\stesysf}{\famesys{\stesys}}{\eft}{\eft}
  \ar{r}{\mathbf{w}(\stesys)}
  \ar{dr}[swap]{\pullbackpr{1}{\eft}{\eft}}
  &
\famesys{\famesys{\stesys}}
  \ar{d}{\eft[1]}
  \\
& \stesysf
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{defn}
Let $\stesys$ be an extension object with pre-weakening operation
$\mathbf{w}(\stesys)$. Then $\famesys{\stesys}$ has the pre-weakening operation
$\mathbf{w}(\famesys{\stesys})$ which is uniquely determined by rendering the
diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\cobesys{\stesysf_2}{\famesys{\famesys{\stesys}}}{\eft[1]}{\eft[1]}
  \ar{rr}{%
      \pullback{\beta_1}{\boldsymbol{\beta}}{\eft}{\eft}
    }
  \ar[bend right]{ddr}[swap]{\pullbackpr{1}{\eft[1]}{\eft[1]}}
  \ar[dotted]{dr}{\mathbf{w}(\famesys{\stesys})}
  &
  {}&
\cobesys{\stesysf}{\famesys{\stesys}}{\eft}{\eft}
  \ar{r}{\mathbf{w}(\stesys)}
  &
\famesys{\famesys{\stesys}}
  \ar{d}{\boldsymbol{\beta}}
  \\
  {}&
\famesys{\famesys{\famesys{\stesys}}}
  \ar{r}{\boldsymbol{\beta}_\mathbf{2}}
  \ar{d}[swap]{\eft[2]}
  &
\famesys{\famesys{\stesys}}
  \ar{d}{\eft[1]}
  \ar{r}{\boldsymbol{\beta}}
  &
\famesys{\stesys}
  \ar{d}{\eft}
  \\
  {}&
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutative.
\end{defn}

\begin{defn}
A pre-weakening object $\stesys$ in $\cat{C}$ is an extension object $\stesys$ 
with a pre-weakening operation 
$ \mathbf{w}(\stesys)
    :
  \cobesys{\stesysf}{\famesys{\stesys}}{\eft}{\eft}
    \to
  \famesys{\famesys{\stesys}}$
for which the diagram
\begin{equation*}
\begin{tikzcd}[column sep=15em]
\cobesys{\stesysf_2}{\famesys{\stesys}}{\eft\circ\eft[1]}{\eft}
  \ar[bend right=10]{dr}[swap]%
    { [ \pullbackpr{1}{\eft\circ\eft[1]}{\eft},%
        \mathbf{w}(\stesys)%
          \circ%
        (\pullback{\efamext}{\catid{\famesys{\stesys}}}{\eft}{\eft})%
        ]%
      }
  \ar{r}{
    [ \pullbackpr{1}{\eft\circ\eft[1]}{\eft},%
      \mathbf{w}(\stesys)%
        \circ%
      (\pullback{\eft[1]}{\catid{\famesys{\stesys}}}{\eft}{\eft})%
      ]}%
  &
\cobesys{\stesysf_2}{\famesys{\famesys{\stesys}}}{\eft[1]}{\eft[1]}
  \ar{d}{\mathbf{w}(\famesys{\stesys})}
  \\
  {}&
\famesys{\famesys{\famesys{\stesys}}}
\end{tikzcd}
\end{equation*}
commutes. This condition is called \emph{Currying for weakening}.
\end{defn}

\begin{lem}
If $\stesys$ is a pre-weakening algebra, then so is $\famesys{\stesys}$. 
\end{lem}

\begin{proof}
\end{proof}

\begin{defn}
A pre-weakening morphism between preweakening objects $\stesys$ and $\stesys'$ is an
extension homomorphism $f:\stesys\to \stesys'$ such that additionally the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\cobesys{\stesysf}{\famesys{\stesys}}{\eft}{\eft}
  \ar{d}[swap]{\mathbf{w}(\stesys)}
  \ar{r}{\pullback{f_1}{\famehom{f}}{\eft'}{\eft'}}
  &
\cobesys{\stesysf'}{\famesys{\stesys'}}{\eft'}{\eft'}
  \ar{d}{\mathbf{w}(\stesys')}
  \\
\famesys{\famesys{\stesys}}
  \ar{r}[swap]{\famehom{\famehom{f}}}
  &
\famesys{\famesys{\stesys'}}
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{defn}
Let $\stesys$ be a pre-weakening algebra and consider $p:\stesysc\rightarrow X\leftarrow Y:p$.
Then we define
\begin{equation*}
\mathbf{w}(\cobesys{Y}{\stesys}{g}{p})
  :
\cobesys
  { (\pullback{Y}{\stesysf}{g}{p\circ\eft})}
  { \famesys{\cobesys{Y}{\stesys}{g}{p}}}
  { g^\ast(\eft)}
  { g^\ast(\eft)}
  \to
\famesys{\famesys{\cobesys{Y}{\stesys}{g}{p}}}
\end{equation*}
to be the unique extension homomorphism rendering the diagram
\begin{equation*}
\begin{tikzcd}
\cobesys
  { \pullback{Y}{\stesysf}{g}{p\circ\eft}}
  { \famesys{\cobesys{Y}{\stesys}{g}{p}}}
  { g^\ast(\eft)}
  { g^\ast(\eft)}
  \ar[bend right]{ddr}[swap]{\pullbackpr{1}{g^\ast(\eft)}{g^\ast(\eft)}}
  \ar{rr}{%
    \pullback
      { \pullbackpr{2}{g}{p\circ\eft}}
      { \boldsymbol{\pi}_\mathbf{2}(g,p\circ\eft)}
      { \eft}
      { \eft}
    }
  \ar[dotted]{dr}{\mathbf{w}(\cobesys{Y}{\stesys}{g}{p})}
  &
  {}&
\cobesys{\stesysf}{\famesys{\stesys}}{\eft}{\eft}
  \ar{r}{\mathbf{w}(\stesys)}
  &
\famesys{\famesys{\stesys}}
  \ar{d}{\boldsymbol{\beta}}
  \\
  {}&
\famesys{\famesys{\cobesys{Y}{\stesys}{g}{p}}}
  \ar{r}{\beta}
  \ar{d}{g^\ast(\eft)_1}
  &
\famesys{\cobesys{Y}{\stesys}{g}{p}}
  \ar{r}{\boldsymbol{\pi}_2(g,p\circ\eft)}
  \ar{d}{g^\ast(\eft)}
  &
\famesys{\stesys}
  \ar{d}{\eft}
  \\
  {}&
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{\cobesys{Y}{\ectxext}{g}{p}}
  &
\pullback{Y}{\stesysc}{g}{p}
  \ar{r}[swap]{\pullbackpr{2}{g}{p}}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutative.
\end{defn}

\subsection{Weakening objects}
Since we have shown that the property of being a pre-weakening object is closed
under the relevant operations, we can make the following definition:

\begin{defn}
A weakening object is a pre-weakening object $\stesys$ with the property that
$\mathbf{w}(\stesys)$ is a pre-weakening morphism.
\end{defn}

\begin{defn}
A weakening homomorphism is a pre-weakening homomorphism such that the domain
and codomain are weakening objects.
\end{defn}

\begin{thm}
Suppose $\stesys$ is a weakening object, then so is $\famesys{\stesys}$
\end{thm}

\begin{thm}
The change of base of any weakening object is again a weakening object.
\end{thm}

\subsection{Projection objects}
\begin{defn}
A pre-projection object is a weakening object $\stesys$ for which there is a term
$\mathbf{i}:\stesysf\to \stesyst_2$ such that the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf \ar{r}{\mathbf{i}} \ar{d}[swap]{\Delta_{\eft}} & \stesyst_2 \ar{d}{\ebd[1]}\\
\pullback{\stesysf}{\stesysf}{\eft}{\eft} \ar{r}[swap]{w(\stesys)_0} & \stesysf_2
\end{tikzcd}
\end{equation*}
commutes. In this diagram $\Delta_{\eft}:\stesysf\to \pullback{\stesysf}{\stesysf}{\eft}{\eft}$ is the diagonal.
\end{defn}

\begin{defn}
A pre-projection homomorphism from $\stesys$ to $\stesys'$ is a weakening homomorphism
$f:\stesys\to \stesys'$ such that the square
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesyst_2
  \ar{r}{f^t_1}
  &
\stesyst_2'
  \\
\stesysf \ar{r}[swap]{f_1}
  \ar{u}{\mathbf{i}}
  &
\stesysf'
  \ar{u}[swap]{\mathbf{i}'}
\end{tikzcd}
\end{equation*}
commutes
\end{defn}

\begin{lem}
The change of base of a pre-projection object is again a pre-projection object.
\end{lem}

\begin{lem}
If $CFT$ is a pre-projection object, then so is $\mathbf{F}_{CFT}$, where
$\mathbf{F}_{\mathbf{i}}$ is defined to be $F\times_{e_0,c}\mathbf{i}$ is
a pre-projection algebra.
\end{lem}

\begin{defn}
A projection algebra is a pre-projection algebra for which weakening is a
pre-projection homomorphism.
\end{defn}

\begin{cor}
The change of base of a projection object is again a projection object.
\end{cor}

\begin{cor}
If $CFT$ is a projection object, then so is $\mathbf{F}_{CFT}$, where
$\mathbf{F}_{\mathbf{i}}$ is defined to be $F\times_{e_0,c}\mathbf{i}$ is
a projection algebra.
\end{cor}

\subsection{Substitution objects}

\begin{defn}
A \emph{pre-substitution} for an extension object $\stesys$ is an
extension homomorphism
\begin{equation*}
\mathbf{s}(\stesys):\cobesys{\stesyst}{\famesys{\famesys{\stesys}}}{\ebd}{\eft[1]}\to \famesys{\stesys}
\end{equation*}
for which the square
\begin{equation*}
\begin{tikzcd}[column sep=large]
\pullback{\stesyst}{\stesysf_2}{\ebd}{\eft[1]}
  \ar{r}{s(\stesys)_0}
  \ar{d}[swap]{\ebd\circ\pullbackpr{1}{\ebd}{\eft[1]}}
  &
\stesysf 
  \ar{d}{\eft}
  \\
\stesysf 
  \ar{r}[swap]{\eft}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutes. A \emph{pre-substitution object} is an extension object
together with a pre-substitution.
\end{defn}

\begin{defn}
A \emph{pre-substitution homomorphism} is an extension homomorphism $f:\stesys'\to \stesys$
for which the square
\begin{equation*}
\begin{tikzcd}[column sep=huge]
\cobesys{\stesyst'}{\famesys{\famesys{\stesys'}}}{\ebd'}{\eft[1]'}
  \ar{r}{\pullback{f^t}{\famehom{\famehom{f}}}{\ebd}{\eft[1]}}
  \ar{d}[swap]{\mathbf{s}'(\stesys')}
  &
\cobesys{\stesyst}{\famesys{\famesys{\stesys}}}{\ebd}{\eft[1]}
  \ar{d}{\mathbf{s}(\stesys)}
  \\
\famesys{\stesys'}
  \ar{r}[swap]{\famehom{f}}
  &
\famesys{\stesys}
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{lem}
The change of base of a pre-substitution object is again a pre-substitution object.
\end{lem}

\begin{lem}
If $\stesys$ is a pre-substitution object, then so is $\famesys{\stesys}$ with
$\mathbf{s}(\famesys{\stesys})$ defined to be the unique extension homomorphism
rendering the diagram
\begin{equation*}
\begin{tikzcd}
\cobesys{\stesyst_2}{\famesys{\famesys{\famesys{\stesys}}}}{\ebd[1]}{\eft[2]}
  \ar[dotted]{dr}{\mathbf{s}(\famesys{\stesys})}
  \ar{rr}{\pullback{\pullbackpr{2}{\ectxext}{\eft\circ\ebd}}{\boldsymbol{\beta}_\mathbf{2}}{\ebd}{\eft[1]}}
  \ar{dd}[swap]{\ebd[1]\circ\pullbackpr{1}{\ebd[1]}{\eft[2]}}
  &
  {}&
\cobesys{\stesyst}{\famesys{\famesys{\stesys}}}{\ebd}{\eft[1]}
  \ar{d}{\mathbf{s}(\stesys)}
  \\
  {}&
\famesys{\famesys{\stesys}}
  \ar{r}{\boldsymbol{\beta}}
  \ar{d}{\eft[1]}
  &
\famesys{\stesys}
  \ar{d}{\eft}
  \\
\stesysf_2
  \ar{r}[swap]{\eft[1]}
  &
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutative.
\end{lem}

\begin{proof}
The requirement on pre-substitutions holds by construction.
\end{proof}

It makes sense now to consider the possibility that the pre-substitution
itself is a pre-substitution homomorphism.

\begin{defn}
A \emph{substitution object} is a pre-substitution object for which substitution is
a pre-substitution homomorphism.
\end{defn}

\begin{cor}
The change of base of a substitution object is again a substitution object.
\end{cor}

\begin{cor}
If $\stesys$ is a substitution object, then so is $\famesys{\stesys}$.
\end{cor}

\subsection{Extension objects with empty context and families}

\begin{defn}
An extension object $\stesys$ is said to have \emph{empty families} if there
is a section
\begin{equation*}
\phi_1(\stesys):\stesysc\to\stesysf
\end{equation*}
of $\eft$, satisfying the following additional properties:
\begin{enumerate}
\item $\phi_1(\stesys)$ is also a section of $\ectxext$.
\item The unique morphism $\phi_2$ rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=huge]
\stesysf
  \ar[bend left=20]{drr}{\phi_1(\stesys)\circ\ectxext}
  \ar[equals,bend right=20]{ddr}
  \ar[dotted]{dr}{\phi_2}
  \\
  {}&
\stesysf_2
  \ar{d}{\eft[1]}
  \ar{r}{\pullbackpr{2}{\ectxext}{\eft}}
  &
\stesysf
  \ar{d}{\eft}
  \\
  {}&
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutative, is a section of $\efamext$.
\item The unique morphism $\iota_1$ rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=huge]
\stesysf
  \ar[equals,bend left=20]{drr}
  \ar[bend right=20]{ddr}[swap]{\phi_1(\stesys)\circ\eft}
  \ar[dotted]{dr}{\iota_1}
  \\
  {}&
\stesysf_2
  \ar{d}{\eft[1]}
  \ar{r}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
  &
\stesysf
  \ar{d}{\eft}
  \\
  {}&
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutative, is a section of $\efamext$.
\end{enumerate}
\end{defn}

\begin{defn}
A homomorphism of extension objects with empty families is an extension
homomorphism $f:\stesys'\to\stesys$ for which the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf'
  \ar{r}{f_1}
  &
\stesysf
  \\
\stesysc'
  \ar{u}{\phi_1(\stesys')}
  \ar{r}[swap]{f_0}
  &
\stesysc
  \ar{u}[swap]{\phi_1(\stesys)}
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{lem}
Suppose $\stesys$ is an extension object with empty families. Then
$\famesys{\stesys}$ is an extension object with empty families, with
$\phi_1(\famesys{\stesys}):=\phi_2$. 
\end{lem}

\begin{lem}
Suppose $\stesys$ is an extension object with empty families and consider
$p:\stesysc\rightarrow X\leftarrow Y:p$. Then
$\cobesys{Y}{\stesys}{g}{p}$ is an extension object with empty families
with $\phi_1(\cobesys{Y}{\stesys}{g}{p}):=g^\ast(\phi_1)$.
\end{lem}

\subsection{E-objects}
\begin{defn}
An \emph{E-object} is an extension object with the structure of a projection object,
the structure of a substitution object and which has an empty context and families,
such that additionally:
\begin{enumerate}
\item substitution is a projection homomorphism
\item weakening is a substitution homomorphism
\item both weakening and substitution are empty-CF homomorphisms.
\item 
\end{enumerate}
\end{defn}
