\subsection{Semantics of the fundamental structure of dependent type theory}

\begin{defn}
A \emph{fundamental structure} $\stesys$ in $\cat{C}$ consists of a diagram of the form
\begin{equation*}
\begin{tikzcd}
\stesyst
  \ar{d}[swap]{\ebd}
  \\
\stesysf
  \ar{d}[swap]{\eft}
  \\
\stesysc
\end{tikzcd}
\end{equation*}
in $\cat{C}$. In this diagram, $\stesysc$ is the object of \emph{contexts}, $\stesysf$ is
the object of \emph{families}, and $\stesyst$ is the object of \emph{terms}.
\end{defn}

\begin{defn}
A \emph{context of $\stesys$ under an object $X$ of $\cat{C}$} is a morphism $\Gamma:X\to \stesysc$ in
$\cat{C}$. A \emph{family over $\Gamma$ under $X$} is a morphism
$A:X\to (\pullback{X}{\stesysf}{\Gamma}{\eft})$. A 
\emph{term of the family $A$ over $\Gamma$ under $X$}
is a morphism $x:X\to(\pullback{X}{\stesyst}{\Gamma}{\ebd\circ\eft})$.

Contexts, families and terms of $\stesys$ under the terminal object $\mathbf{1}$
are called \emph{contexts, families and terms of $\stesys$}, respectively.
\end{defn}

\begin{lem}
For any object $X$ of $\stesys$, contexts, families and terms of $\stesys$ under
$X$ satisfy all the judgmental equality rules stated in \autoref{judgments}.
\end{lem}

\begin{proof}
This follows immediately from the fact that equality on the hom-sets are
equivalence relations.
\end{proof}

\begin{defn}
Let $\stesys'$ and $\stesys$ be fundamental structures in $\cat{C}$. A
homomorphism $f:\stesys'\to\stesys$ is a triple $(f_0,f_1,f^t)$ 
consisting of morphisms
\begin{equation*}
\begin{tikzcd}
\stesyst' 
  \ar{r}{f^t}
  \ar{d}[swap]{\ebd'}
  &
\stesyst
  \ar{d}{\ebd}
  \\
\stesysf'
  \ar{r}{f_1}
  \ar{d}[swap]{\eft'}
  &
\stesysf
  \ar{d}{\eft}
  \\
\stesysc' 
  \ar{r}[swap]{f_0}
  &
\stesysc
\end{tikzcd}
\end{equation*}
such that the indicated squares commute.
\end{defn}

\begin{defn}
Suppose $\stesys$ is a fundamental structure in $\cat{C}$ and that 
$p:\stesysc\rightarrow X\leftarrow Y:g$.
Then we define the fundamental structure $\cobesys{Y}{\stesys}{g}{p}$ to consist
of the part of the left column above $Y$ in the diagram
\begin{equation*}
\begin{tikzcd}
\cobesys{Y}{\stesyst}{g}{p\circ\eft\circ\ebd}
  \ar{r}
  \ar{d}[swap]{g^\ast(\ebd)}
  &
\stesyst
  \ar{d}{\ebd}
  \\
\cobesys{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}
  \ar{d}[swap]{g^\ast(\eft)}
  &
\stesysf
  \ar{d}{\eft}
  \\
\cobesys{Y}{\stesysc}{g}{p}
  \ar{r}
  \ar{d}[swap]{\pullbackpr{1}{g}{p}}
  &
\stesysc
  \ar{d}{p}
  \\
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*}
The horizontal arrows form a homomorphism
of fundamental structures.
\end{defn}
