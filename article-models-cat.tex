\section{E-objects in categories with finite limits}
In this section we assume that $\cat{C}$ is a finitely complete category and
whenever we write a pullback, we assume that it is chosen. Recall that for
any morphism $f:A\to B$ in a category $\cat{C}$ with chosen pullbacks, there
is a functor
\begin{equation*}
f^\ast : \cat{C}/B\to\cat{C}/A.
\end{equation*}
As usual, when $g:X\to B$ is a morphism, we will write $f^\ast(X)$ for the
domain of $f^\ast(g)$. When there is more than one morphism $X\to B$ involved,
as will be the case below, we will write $\pullback{A}{X}{f}{g}$. The projections
will be written as $\pullbackpr{1}{f}{g}$ and $\pullbackpr{2}{f}{g}$. So in this notation, a
typical pullback diagram has the following form:
\begin{equation*}
\begin{tikzcd}[column sep=large]
\pullback{A}{X}{f}{g}
  \ar{r}{\pullbackpr{1}{f}{g}}
  \ar{d}[swap]{\pullbackpr{2}{f}{g}}
  &
A \ar{d}{f}
  \\
X \ar{r}[swap]{g}
  &
B
\end{tikzcd}
\end{equation*}
Also, when we have a commutative diagram of the form
\begin{equation*}
\begin{tikzcd}
A \ar{r}{f}
  \ar{d}{a}
  &
X \ar{d}
  & 
B \ar{l}[swap]{g}
  \ar{d}{b}
  \\
A'
  \ar{r}[swap]{f'}
  &
X'
  &
B'
  \ar{l}{g'}
\end{tikzcd}
\end{equation*}
we will denote the unique map from $\pullback{A}{B}{f}{g}$ to $\pullback{A'}{B'}{f'}{g'}$
such that the diagram
\begin{equation*}
\begin{tikzcd}
  {}
  & 
\pullback{A'}{B'}{f'}{g'}
  \ar{dd}
  \ar{rr}
  &
  &
B'
  \ar{dd}{g'}
  \\
\pullback{A}{B}{f}{g}
  \ar{dd}
  \ar[crossing over]{rr}
  \ar[dotted]{ur}{\pullback{a}{b}{f'}{g'}}
  &
  &
B \ar{ur}{b}
  \\
  {}
  &
A'
  \ar{rr}
  &
  &
X'
  \\
A \ar{rr}[swap]{f}
  \ar{ur}{a}
  &
  &
X \ar[crossing over,leftarrow]{uu}[near end,swap]{g}
  \ar{ur}
\end{tikzcd}
\end{equation*}
commutes, by $\pullback{a}{b}{f'}{g'}$. In the current work, we shall
write $A\times B$ for the pullback of $A\rightarrow 1\leftarrow B$, and
$\pi_1$ and $\pi_2$ for its projections (thus, no separate choice of
cartesian products is made).


\subsection{Extension objects}
\begin{defn}
A \emph{pre-extension object $\stesys$ in $\cat{C}$} consists of a \emph{fundamental structure}, which is a diagram of the form
\begin{equation*}
\begin{tikzcd}
\stesyst
  \ar{d}[swap]{\ebd}
  \\
\stesysf
  \ar{d}[swap]{\eft}
  \\
\stesysc
\end{tikzcd}
\end{equation*}
in $\cat{C}$ together with the \emph{context extension} and \emph{family extension} operations
\begin{align*}
\ectxext &:\stesysf\to \stesysc\\
\efamext & :\stesysff\to \stesysf,
\end{align*}
respectively, such that the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_2 
  \ar{r}{\efamext} 
  \ar{d}[swap]{\eft[1]} 
  & 
\stesysf 
  \ar{d}{\eft}
  \\
\stesysf
  \ar{r}[swap]{\eft} 
  & 
\stesysc
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{defn}
We introduce the following notation:
\begin{align*}
\stesysf_2 
  & := \stesysff
  \\
\eft[1] 
  & := \pullbackpr{1}{\ectxext}{\eft} : \stesysf_2\to\stesysf
  \\
\stesysf_3 & := \pullback{\stesysf_2}{\stesysf_2}{\efamext}{\eft[1]}
  \\
\eft[2]
  & := \pullbackpr{1}{\efamext}{\eft[1]} : \stesysf_3\to\stesysf_2.
\end{align*}
Then it follows that the outer square in the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_3
  \ar[dotted]{dr}{\eext{2}}
  \ar{rr}{\pullback{\pullbackpr{2}{\ectxext}{\eft}}{\pullbackpr{2}{\ectxext}{\eft}}{\ectxext}{\eft}}
  \ar{dd}[swap]{\eft[2]}
  & 
  &
\stesysf_2
  \ar{d}{\efamext}
  \\
  &
\stesysf_2
  \ar{d}[swap]{\eft[1]}
  \ar{r}{\pullbackpr{2}{\ectxext}{\eft}}
  &
\stesysf
  \ar{d}{\eft}
  \\
\stesysf_2
  \ar{r}[swap]{\eft[1]}
  &
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
commutes. We define $\eext{2}$ to be the unique morphism rendering the above diagram
commutative. Now we may continue to define
\begin{align*}
\stesysf_4 
  & := 
\pullback{\stesysf_3}{\stesysf_3}{\eext{2}}{\eft[2]}
  \\
\eft[3] 
  & := 
\pullbackpr{1}{\eext{2}}{\eft[2]}.
\end{align*}
Then we see that the outer square of the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_4
  \ar[dotted]{dr}{\eext{3}}
  \ar{rr}{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  \ar{dd}[swap]{\eft[3]}
  & 
  &
\stesysf_3
  \ar{d}{\eext{2}}
  \\
  &
\stesysf_3
  \ar{d}[swap]{\eft[2]}
  \ar{r}{\pullbackpr{2}{\efamext}{\eft[1]}}
  &
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysf_3
  \ar{r}[swap]{\eft[2]}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes,
so we may define $\eext{3}$ to be the unique map which renders the diagram. It
is straightforward to continue this process by induction, but we shall need not
go any further in this article.
\end{defn}

\begin{defn} An extension object is a pre-extension object $\stesys$ for which 
the diagrams
\begin{equation*}
\begin{tikzcd}
\stesysf_2 
  \ar{d}[swap]{\pullbackpr{2}{\ectxext}{\eft}} 
  \ar{r}{\efamext} 
  & 
\stesysf 
  \ar{d}{\ectxext}
  \\
\stesysf 
  \ar{r}[swap]{\ectxext} 
  & 
\stesysc
\end{tikzcd}
\qquad
\begin{tikzcd}
\stesysf_3
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{r}{\eext{2}}
  & 
\stesysf_2 
  \ar{d}{\efamext} 
  \\
\stesysf_2 
  \ar{r}[swap]{\efamext} 
  &
\stesysf
\end{tikzcd}
\end{equation*}
commute.
\end{defn}

\begin{comment}
\begin{lem}
There exists an isomorphism $\alpha$ such that the triangle
\begin{equation*}
\begin{tikzcd}[column sep=tiny]
\pullback{\stesysf}{\stesysf_2}{\ectxext}{\eft\circ\eft[1]}
  \ar[dotted]{rr}{\alpha}
  \ar{dr}[swap]{\pullback{\catid{\stesysf}}{\efamext}{\ectxext}{\eft}}
  &
  &
\stesysf_3
  \ar{dl}{\eext{2}}
  \\
& \stesysf_2
\end{tikzcd}
\end{equation*}
commutes
\end{lem}

\begin{proof}
There is a unique morphism $\alpha:
\pullback{\stesysf}{\stesysf_2}{\ectxext}{\eft\circ\eft[1]}\to\stesysf_3$
rendering the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\pullback{\stesysf}{\stesysf_2}{\ectxext}{\eft\circ\eft[1]}
  \ar[bend left=10,yshift=.5ex]{drrr}{\pullbackpr{2}{\ectxext}{\eft}\circ\pullbackpr{2}{\ectxext}{\eft\circ\eft[1]}}
  \ar[bend right=10]{ddr}[swap]{\pullback{\catid{\stesysf}}{\eft[1]}{\ectxext}{\eft}}
  \ar[dotted]{dr}{\alpha}
  \\
& \stesysf_3
  \ar{r}{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{d}{\eft[2]}
  &
\stesysf_2
  \ar{d}[swap]{\eft[1]}
  \ar{r}[swap]{\pullbackpr{2}{\ectxext}{\eft}}
  &
\stesysf
  \ar{d}{\eft}
  \\
{} & \stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
  \ar{r}[swap]{\ectxext}
  &
\stesysc
\end{tikzcd}
\end{equation*}
\end{proof}
\end{comment}

\begin{defn}
Suppose $\stesys$ is a pre-extension object of $\cat{C}$. Then we define the pre-extension object
$\famesys{\stesys}$ to consist of the fundamental structure
\begin{equation*}
\begin{tikzcd}
\pullback{\stesysf}{\stesyst}{\ectxext}{\eft\circ\ebd}
  \ar{d}{\ectxext^\ast(\ebd)}
  \\
\stesysf_2
  \ar{d}{\eft[1]}
  \\
\stesysf
\end{tikzcd}
\end{equation*}
with the extension operations
\begin{align*}
\efamext 
  & 
  : \stesysf_2\to\stesysf\\
\eext{2} & : \stesysf_3\to\stesysf_2.
\end{align*}
\end{defn}

In \autoref{famextobj} below we shall show that $\famesys{\stesys}$ is an
extension algebra whenever $\stesys$ is an extension algebra. We shall need
a handful of lemmas to give the proof.

\begin{defn}
We define
\begin{align*}
\beta_1 
  & := 
\pullbackpr{2}{\ectxext}{\eft}
  & &
  : \stesysf_2\to\stesysf
  \\
\beta_2
  & :=
\pullback{\beta_1}{\beta_1}{\ectxext}{\eft}
  & &
  : \stesysf_3\to\stesysf_2
  \\
\beta_3
  & :=
\pullback{\beta_2}{\beta_2}{\efamext}{\eft[1]}
  & &
  : \stesysf_4\to\stesysf_3.
\end{align*}
\end{defn}

\begin{lem}
Let $\stesys$ be a pre-extension object. Then the square
\begin{equation*}
\begin{tikzcd}[column sep=10em]
\stesysf_4
  \ar{r}{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  \ar{d}[swap]{\beta_3}
  &
\stesysf_3
  \ar{d}{\beta_2}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
commutes.
\end{lem}

\begin{proof}
It is straightforward to verify the equalities
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ\beta_2\circ
  (\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]})
  & =
\pullbackpr{1}{\ectxext}{\eft}\circ\beta_2\circ\beta_3
\intertext{and}
\pullbackpr{2}{\ectxext}{\eft}\circ\beta_2\circ
  (\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]})
  & =
\pullbackpr{2}{\ectxext}{\eft}\circ\beta_2\circ\beta_3.\qedhere
\end{align*}
\end{proof}

Note that the square
\begin{equation*}
\begin{tikzcd}
\stesysf_3
  \ar{r}{\beta_2}
  \ar{d}[swap]{\eext{2}}
  &
\stesysf_2
  \ar{d}{\efamext}
  \\
\stesysf_2
  \ar{r}[swap]{\beta_1}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes by definition. We have a similar result relating $\eext{3}$ and
$\eext{2}$.

\begin{lem}
Let $\stesys$ be a pre-extension object. Then the square
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{r}{\beta_3}
  \ar{d}[swap]{\eext{3}}
  &
\stesysf_3
  \ar{d}{\eext{2}}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
commutes.
\end{lem}

\begin{proof}
It is straightforward to verify that
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ\beta_2\circ\eext{3}
  & = \beta_1\circ\eft[2]\circ\eft[3]
\intertext{and that}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\beta_3
  & = \beta_1\circ\eft[2]\circ\eft[3].
\end{align*}
Thus, it remains to verify that
\begin{equation*}
\pullbackpr{2}{\ectxext}{\eft}\circ\beta_2\circ\eext{3}
  = \pullbackpr{2}{\ectxext}{\eft}\circ\eext{2}\circ\beta_3.
\end{equation*}
It is straightforward to see that the diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_4
  \ar{dd}[swap]{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  \ar{r}{\eext{3}}
  &
\stesysf_3
  \ar{r}{\beta_2}
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  &
\stesysf_2
  \ar{dd}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
  {} &
\stesysf_2
  \ar{dr}{\beta_1}
  \\
\stesysf_3
  \ar{ur}{\eext{2}}
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes. It is likewise straightforward to see that the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{r}{\beta_3}
  \ar{d}[swap]{\pullback{\pullbackpr{2}{\efamext}{\eft[1]}}{\pullbackpr{2}{\efamext}{\eft[1]}}{\efamext}{\eft[1]}}
  &
\stesysf_3
  \ar{r}{\eext{2}}
  \ar{d}[swap]{\beta_2}
  &
\stesysf_2
  \ar{d}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
\stesysf_3
  \ar{r}[swap]{\beta_2}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes, completing our goal.
\end{proof}

\begin{thm}[Local extension structure]\label{famextobj}
If $\stesys$ is an extension object, then so is $\famesys{\stesys}$.
\end{thm}

\begin{proof}
Note that the diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_3
  \ar{d}[swap]{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{r}{\eext{2}}
  & 
\stesysf_2 
  \ar{d}{\efamext} 
  \\
\stesysf_2 
  \ar{r}[swap]{\efamext} 
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes by assumption. For the second condition, we have to show that the
diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{d}[swap]{\pullbackpr{2}{\eext{2}}{\eft[2]}}
  \ar{r}{\eext{3}}
  & 
\stesysf_3
  \ar{d}{\eext{2}} 
  \\
\stesysf_3
  \ar{r}[swap]{\eext{2}} 
  &
\stesysf_2
\end{tikzcd}
\end{equation*}
Since this is a question about two maps into a pullback, it suffices to verify
that
\begin{align*}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\eext{3}
  & =
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\pullbackpr{2}{\eext{2}}{\eft[2]}
  \\
\pullbackpr{2}{\ectxext}{\eft}\circ\eext{2}\circ\eext{3}
  & =
\pullbackpr{2}{\ectxext}{\eft}\circ\eext{2}\circ\pullbackpr{2}{\eext{2}}{\eft[2]}.
\end{align*}
For the first equality, it is fairly straightforward to show that both the
equalities
\begin{equation*}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\eext{3}
  =
\eft[1]\circ\eft[2]\circ\eft[3]
\end{equation*}
and
\begin{equation*}
\pullbackpr{1}{\ectxext}{\eft}\circ\eext{2}\circ\pullbackpr{2}{\eext{2}}{\eft[2]}
  =
\eft[1]\circ\eft[2]\circ\eft[3].
\end{equation*}
hold. For the second subgoal (which is more tricky). Notice first that the
diagram
\begin{equation*}
\begin{tikzcd}
\stesysf_4
  \ar{r}{\eext{3}}
  \ar{d}[swap]{\beta_3}
  &
\stesysf_3
  \ar{r}{\eext{2}}
  \ar{d}[swap]{\beta_2}
  &
\stesysf_2
  \ar{d}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
\stesysf_3
  \ar{r}[swap]{\eext{2}}
  &
\stesysf_2
  \ar{r}[swap]{\efamext}
  &
\stesysf
\end{tikzcd}
\end{equation*}
commutes. We also have the commutative diagram
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf_4
  \ar{r}{\pullbackpr{2}{\eext{2}}{\eft[2]}}
  \ar{d}[swap]{\beta_3}
  &
\stesysf_3
  \ar{r}{\eext{2}}
  \ar{d}[swap]{\beta_2}
  &
\stesysf_2
  \ar{d}{\pullbackpr{2}{\ectxext}{\eft}}
  \\
\stesysf_3
  \ar{r}{\pullbackpr{2}{\efamext}{\eft[1]}}
  \ar{dr}[swap]{\eext{2}}
  &
\stesysf_2
  \ar{r}{\efamext}
  &
\stesysf
  \\
  {} &
\stesysf_2
  \ar{ur}[swap]{\efamext}
\end{tikzcd}
\end{equation*}
completing the proof.
\end{proof}

\begin{defn}
Let $\stesys$ and $\stesys'$ be (pre-)extension algebras. An \emph{(pre-)extension homomorphism $f$ from 
$\stesys$ to $\stesys'$} is a triple $(f_0,f_1,f_2)$ consisting of morphisms
\begin{equation*}
\begin{tikzcd}
\stesyst 
  \ar{r}{f_2}
  \ar{d}[swap]{\ebd}
  &
\stesyst'
  \ar{d}{\ebd'}
  \\
\stesysf 
  \ar{r}{f_1}
  \ar{d}[swap]{\eft}
  &
\stesysf'
  \ar{d}{\eft'}
  \\
\stesysc 
  \ar{r}[swap]{f_0}
  &
\stesysc'
\end{tikzcd}
\end{equation*}
such that the indicated squares commute, for which furthermore the squares
\begin{equation*}
\begin{tikzcd}
\stesysf \ar{r}{f_1}
  \ar{d}[swap]{\ectxext}
  &
\stesysf'
  \ar{d}{\ectxext'}
  \\
\stesysc
  \ar{r}[swap]{f_0}
  &
\stesysc'
\end{tikzcd}
\end{equation*}
and
\begin{equation*}
\begin{tikzcd}[column sep=large]
\stesysf\times_{\ectxext,\eft} \stesysf
  \ar{r}{f_1\times_{\ectxext',\eft'} f_1}
  \ar{d}[swap]{\efamext}
  &
\stesysf'\times_{\ectxext',\eft'} \stesysf'
  \ar{d}{\efamext'}
  \\
\stesysf
  \ar{r}[swap]{f_1}
  &
\stesysf'
\end{tikzcd}
\end{equation*}
Composition and the identity homomorphism are defined in the expected way.
\end{defn}

\begin{lem}[Stability under retracts]\label{esys-retract}
Suppose $f:\stesys\to\stesys'$ is a pre-extension homomorphism between
pre-extension objects. If there is a pre-extension homomorphism $g:\stesys'\to
\stesys$ such that $g\circ f=\catid{\stesys}$ and $\stesys'$ is an extension
algebra, then $\stesys$ is an extension algebra.
\end{lem}

\begin{proof}
We first show that the square
\begin{equation*}
\begin{tikzcd}
\stesysff 
  \ar{r}{\efamext} 
  \ar{d}[swap]{\pullbackpr{1}{\ectxext}{\eft}} 
  & 
\stesysf 
  \ar{d}{\eft}
  \\
\stesysf
  \ar{r}[swap]{\eft} 
  & 
\stesysc
\end{tikzcd}
\end{equation*}
commutes. Note that we have the diagram
\begin{equation*}
\begin{tikzcd}
  {}
  & 
\stesysf
  \ar{dd}[near start]{\eft}
  \ar{rr}{f_1}
  &
  &
\stesysf'
  \ar{dd}[near start]{\eft'}
  \ar{rr}{g_1}
  &
  &
\stesysf
  \ar{dd}{\eft}
  \\
\pullback{\stesysf}{\stesysf}{\ectxext}{\eft}
  \ar{dd}[swap]{\pullbackpr{1}{\ectxext}{\eft}}
  \ar[crossing over,dotted]{rr}[swap,fill=white]{\pullback{f_1}{f_1}{\ectxext'}{\eft'}}
  \ar{ur}{\efamext}
  &
  &
\pullback{\stesysf'}{\stesysf'}{\ectxext'}{\eft'} 
  \ar{ur}[near start]{\efamext'}
  \ar[crossing over,dotted]{rr}[swap,fill=white]{\pullback{g_1}{g_1}{\ectxext}{\eft}}
  &
  &
\pullback{\stesysf}{\stesysf}{\ectxext}{\eft}
  \ar{ur}%{\efamext}
  \\
  {}
  &
\stesysc
  \ar{rr}[near start]{f_0}
  &
  &
\stesysc'
  \ar{rr}[near start]{g_0}
  &
  &
\stesysc
  \\
\stesysf 
  \ar{rr}[swap]{f_1}
  \ar{ur}{\ectxext}
  &
  &
\stesysf' 
  \ar[crossing over,leftarrow]{uu}[near end,swap]{}
  \ar{ur}[swap,near end]{\ectxext'}
  \ar{rr}[swap]{g_1}
  &
  &
\stesysf
  \ar[crossing over,leftarrow]{uu}[near end,swap]{}
  \ar{ur}{\ectxext}
\end{tikzcd}
\end{equation*}
and we also have that
\begin{equation*}
(\pullback{g_1}{g_1}{\ectxext}{\eft})\circ(\pullback{f_1}{f_1}{\ectxext'}{\eft'})
=\catid{},
\end{equation*}
so we can read off from the above diagram and the fact that the middle square
commutes, that the square on the left commutes. Via a similar method it can
be seen that the other two conditions are met as well.
{\color{red} Do I need to give the full proof?}
\end{proof}

\begin{defn}[Change of base]\label{cobesys}
Suppose $\stesys$ is a pre-extension object in $\cat{C}$ and that 
$p:\stesysc\rightarrow X\leftarrow Y:g$.
Then we define the pre-extension object $\cobesys{Y}{\stesys}{g}{p}$ to consist of
\begin{equation*}
\begin{tikzcd}
\cobesys{Y}{\stesyst}{g}{p\circ\eft\circ\ebd}
  \ar{r}
  \ar{d}[swap]{g^\ast(\ebd)}
  &
\stesyst
  \ar{d}{\ebd}
  \\
\cobesys{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}
  \ar{d}[swap]{g^\ast(\eft)}
  &
\stesysf
  \ar{d}{\eft}
  \\
\cobesys{Y}{\stesysc}{g}{p}
  \ar{r}
  \ar{d}[swap]{\pullbackpr{1}{g}{p}}
  &
\stesysc
  \ar{d}{p}
  \\
Y \ar{r}[swap]{g}
  &
X
\end{tikzcd}
\end{equation*} 
and the operations
\begin{align*}
\pullback{\catid{Y}}{\ectxext}{g}{p} 
  & : \pullback{Y}{\stesysf}{g}{p\circ\eft}\to \pullback{Y}{\stesysc}{g}{p}\\
g^\ast(\efamext) & : 
  \pullback
    {\pullback{Y}{\stesysf}{g}{p\circ\eft}}
    {\pullback{Y}{\stesysf}{g}{p\circ\eft}}
    {\pullback{\catid{Y}}{\ectxext}{g}{p}}
    {g^\ast(\eft)}
  \to 
  \pullback{Y}{\stesysf}{g}{p\circ\eft}.
\end{align*}
The process of obtaining the pre-extension object $\cobesys{Y}{\stesys}{g}{p}$ out of $\stesys$
and $g:Y\to X$ is also called the \emph{change of base}.
\end{defn}

\begin{lem}
Any change of base of an extension algebra results in an extension algebra.
\end{lem}

\begin{proof}
Let $\stesys$ be an extension algebra and consider $p:\stesysc\rightarrow X\leftarrow Y:g$.
Our first subgoal is to verify that the square
\begin{equation*}
\begin{tikzcd}
\pullback%
  {\pullback{Y}{\stesysf}{g}{p\circ\eft}}%
  {\pullback{Y}{\stesysf}{g}{p\circ\eft}}%
  {g^\ast(\ectxext)}%
  {g^\ast(\eft)}
  \ar{r}{g^\ast(\efamext)} 
  \ar{d}[swap]{(g^\ast(\ectxext))^\ast(g^\ast(\eft))} 
  & 
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{d}{g^\ast(\eft)}
  \\
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{g^\ast(\eft)} 
  & 
\pullback{Y}{\stesysc}{g}{p}
\end{tikzcd}
\end{equation*}
commutes. To see this, note that we have a commutative diagram
\begin{equation*}
\begin{tikzcd}
{}&
  \pullback%
  {Y}
  {\pullback{\stesysf}{\stesysf}{\ectxext}{\eft}}
  {g}
  {p\circ\eft\circ\pullbackpr{2}{\ectxext}{\eft}}
  \ar{dl}[swap]{g^\ast(\pullbackpr{2}{\ectxext}{\eft})}
  \ar{dr}{g^\ast(\efamext)}
  \ar{d}{\simeq}
  \\
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  &
\pullback%
  {\pullback{Y}{\stesysf}{g}{p\circ\eft}}
  {\pullback{Y}{\stesysf}{g}{p\circ\eft}}
  {g^\ast(\ectxext)}
  {g^\ast(\eft)}
  \ar{r}[swap]{g^\ast(\efamext)}
  \ar{l}[yshift=-1ex]{(g^\ast(\ectxext))^\ast(g^\ast(\eft))}
  &
\pullback{Y}{\stesysf}{g}{p\circ\eft}
\end{tikzcd}
\end{equation*}
where the downwards arrow is an isomorphism. Using this observation, we see that
it is equivalent to show that the square
\begin{equation*}
\begin{tikzcd}
\pullback%
  {Y}
  {\pullback{\stesysf}{\stesysf}{\ectxext}{\eft}}
  {g}
  {p\circ\eft\circ\pullbackpr{2}{\ectxext}{\eft}}
  \ar{r}{g^\ast(\efamext)} 
  \ar{d}[swap]{g^\ast(\pullbackpr{2}{\ectxext}{\eft})} 
  & 
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{d}{g^\ast(\eft)}
  \\
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{g^\ast(\eft)} 
  & 
\pullback{Y}{\stesysc}{g}{p}
\end{tikzcd}
\end{equation*}
commutes. But this is just a pullback along $g$ of a square which commutes by assumption.
\begin{comment}
Our next subgoal is to verify that the square
\begin{equation*}
\begin{tikzcd}
\pullback%
  {\pullback{Y}{\stesysf}{g}{p\circ\eft}}%
  {\pullback{Y}{\stesysf}{g}{p\circ\eft}}%
  {g^\ast(\ectxext)}%
  {g^\ast(\eft)}
  \ar{r}{g^\ast(\efamext)} 
  \ar{d}[swap]{(g^\ast(\ectxext))^\ast(g^\ast(\ectxext))} 
  & 
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{d}{g^\ast(\ectxext)}
  \\
\pullback{Y}{\stesysf}{g}{p\circ\eft}
  \ar{r}[swap]{g^\ast(\ectxext)} 
  & 
\pullback{Y}{\stesysc}{g}{p}
\end{tikzcd}
\end{equation*}
\end{comment}
\end{proof}

\begin{lem}
Suppose $f:\stesys\to \stesys'$ is a pre-extension homomorphism and consider a morphism
$p:\stesys'\to X$ and $g:Y\to X$. Then the change of base 
$g^\ast(f):\cobesys{Y}{\stesys}{g}{p\circ f_0}\to
\cobesys{Y}{\stesys'}{g}{p}$ is a pre-extension morphism.
\end{lem}

\begin{lem}
Suppose that $f:\stesys\to\stesys'$ is a pre-extension homomorphism. Then the
triple
\begin{align*}
f_1 & : \stesysf\to\stesysf'
  \\
\pullback{f_1}{f_1}{\ectxext'}{\eft'}
  & : \pullback{\stesysf}{\stesysf}{\ectxext}{\eft}
  \to \pullback{\stesysf'}{\stesysf'}{\ectxext'}{\eft'}
  \\
\pullback{f_1}{f_2}{\ectxext'}{\eft'\circ\ebd'}
  & : \pullback{\stesysf}{\stesyst}{\ectxext}{\eft\circ\ebd}
  \to \pullback{\stesysf'}{\stesyst'}{\ectxext'}{\eft'\circ\ebd'}
\end{align*}
assembles a pre-extension homomorphism $\famehom{f}$ from
$\famesys{\stesys}$ to $\famesys{\stesys'}$.
\end{lem}

\subsection{Weakening objects}
\begin{defn}
A pre-weakening object $CFT$ in $\cat{C}$ is an extension object $CFT$ with 
an extension homomorphism $\mathbf{w}:F\times\mathbf{F_{CFT}}\to \mathbf{F_{F_{CFT}}}$.
\end{defn}

\begin{comment}
\begin{align*}
w_0 & : F\times F\to F\times_{e_0,c} F\\
w_1 & : F\times(F\times_{e_0,c} F) \to F\times_{e_0,c \circ \pi_2^{e_0,c}} (F\times_{e_0,c}F)\\
w_2 & : F\times(F\times_{e_0,t\circ c} T) \to F\times_{e_0,c}(F\times_{e_0,t\circ c} T)
\end{align*}
for which the following diagrams commute:
\begin{equation*}
\begin{tikzcd}
F\times F \ar{r}{w_0} \ar{dr}[swap]{\pi_1} & F\times_{e_0,c}F \ar{d}{\pi_2^{e_0,c}}\\
& F
\end{tikzcd}
\end{equation*}
\begin{equation*}
\begin{tikzcd}
F\times(F\times_{e_0,c} F) 
  \ar{d}[swap]{\catid{F}\times \pi_2^{e_0,c}}
  \ar{r}{w_1}
  &
F\times_{e_0,c\circ \pi_2^{e_0,c}} (F\times_{e_0,c}F)
  \ar{d}{e_0^\ast(\pi_2^{e_0,c})}
  \\
F\times F
  \ar{r}[swap]{w_0}
  &
F\times_{e_0,c} F
\end{tikzcd}
\end{equation*}
\begin{equation*}
\begin{tikzcd}
F\times(F\times_{e_0,t\circ c} T)
  \ar{r}{w_2}
  \ar{d}[swap]{\catid{F}\times e_0^\ast(t)}
  &
F\times_{e_0,c}(F\times_{e_0,t\circ c} T)
  \ar{d}{e_0^\ast(e_0^\ast(t))}
  \\
F\times(F\times_{e_0,c} F)
  \ar{r}[swap]{w_1}
  &
F\times_{e_0,c\circ \pi_2^{e_0,c}} (F\times_{e_0,c}F)
\end{tikzcd}
\end{equation*}
\end{comment}

\begin{defn}
A pre-weakening morphism between preweakening objects $CFT$ and $CFT'$ is an
extension homomorphism $f:CFT\to CFT'$ such that additionally the diagram
\begin{equation*}
\begin{tikzcd}
F\times \mathbf{F}_{CFT}
  \ar{d}[swap]{\mathbf{w}}
  \ar{r}{f_1\times\mathbf{F}_f}
  &
F'\times\mathbf{F}_{CFT'}
  \ar{d}{\mathbf{w'}}
  \\
\mathbf{F}_{\mathbf{F}_{CFT}}
  \ar{r}[swap]{\mathbf{F}_{\mathbf{F}_f}}
  &
\mathbf{F}_{\mathbf{F}_{CFT'}}
\end{tikzcd}
\end{equation*}
commutes
\end{defn}

\subsection{Projection objects}
\begin{defn}
A pre-projection object is a weakening object $CFT$ for which there is a term
$\mathbf{i}:F\to F\times_{e_0,c}T$ such that the diagram
\begin{equation*}
\begin{tikzcd}
{} & F\times_{e_0,c}T \ar{d}{F\times_{e_0,c}t}\\
F \ar{ur}{\mathbf{i}} \ar{r}[swap]{w_0\circ\Delta} & F\times_{e_0,c}F
\end{tikzcd}
\end{equation*}
commutes. In this diagram $\Delta:F\to F\times F$ is the diagonal.
\end{defn}

\begin{defn}
A pre-projection homomorphism from $CFT$ to $CFT'$ is a weakening homomorphism
$f:CFT\to CFT'$ such that the square
\begin{equation*}
\begin{tikzcd}[column sep=large]
F\times_{e_0,c}T
  \ar{r}{f_1\times_{e_0,c}f_2}
  &
F'\times_{e_0',c'}T'
  \\
F \ar{r}[swap]{f_1}
  \ar{u}{\mathbf{i}}
  &
F'
  \ar{u}[swap]{\mathbf{i}'}
\end{tikzcd}
\end{equation*}
\end{defn}

\begin{lem}
The change of base of a pre-projection object is again a pre-projection object.
\end{lem}

\begin{lem}
If $CFT$ is a pre-projection object, then so is $\mathbf{F}_{CFT}$, where
$\mathbf{F}_{\mathbf{i}}$ is defined to be $F\times_{e_0,c}\mathbf{i}$ is
a pre-projection algebra.
\end{lem}

\begin{defn}
A projection algebra is a pre-projection algebra for which weakening is a
pre-projection homomorphism.
\end{defn}

\begin{cor}
The change of base of a projection object is again a projection object.
\end{cor}

\begin{cor}
If $CFT$ is a projection object, then so is $\mathbf{F}_{CFT}$, where
$\mathbf{F}_{\mathbf{i}}$ is defined to be $F\times_{e_0,c}\mathbf{i}$ is
a projection algebra.
\end{cor}

\subsection{Substitution objects}

\begin{defn}
A pre-substitution object is an extension object for which the is an
extension homomorphism
\begin{equation*}
\mathbf{s}:T\times\mathbf{F}_{\mathbf{F}_{CFT}}\to \mathbf{F}_{CFT}
\end{equation*}
such that the square
\begin{equation*}
\begin{tikzcd}
T\times(F\times_{e_0,c}F)
  \ar{r}{s_0}
  \ar{d}[swap]{\pi_1(e_0,c)\circ\pi_2}
  &
F \ar{d}{\eft}
  \\
F \ar{r}[swap]{\eft}
  &
C
\end{tikzcd}
\end{equation*}
commutes.
\end{defn}

\begin{defn}
A pre-substitution homomorphism is an extension homomorphism $f:CFT\to CFT'$
such that the square
\begin{equation*}
\begin{tikzcd}
T\times\mathbf{F}_{\mathbf{F}_{CFT}}
  \ar{r}{f_2\times\mathbf{F}_{\mathbf{F}_f}}
  \ar{d}[swap]{\mathbf{s}}
  &
T'\times\mathbf{F}_{\mathbf{F}_{CFT'}}
  \ar{d}{\mathbf{s}'}
  \\
\mathbf{F}_{CFT}
  \ar{r}[swap]{\mathbf{F}_f}
  &
\mathbf{F}_{CFT'}
\end{tikzcd}
\end{equation*}
\end{defn}

\begin{lem}
The change of base of a pre-substitution object is again a pre-substitution object.
\end{lem}

\begin{lem}
If $CFT$ is a pre-substitution object, then so is $\mathbf{F}_{CFT}$ with
$\mathbf{F}_{\mathbf{s}}=...$.
\end{lem}

\begin{defn}
A substitution object is a pre-substitution object for which substitution is
a pre-substitution homomorphism.
\end{defn}

\begin{cor}
The change of base of a substitution object is again a substitution object.
\end{cor}

\begin{cor}
If $CFT$ is a substitution object, then so is $\mathbf{F}_{CFT}$.
\end{cor}

\subsection{E-objects}
\begin{defn}
An E-object is an extension object with the structure of a projection object,
the structure of a substitution object and which has an empty context and families,
such that additionally:
\begin{enumerate}
\item substitution is a projection homomorphism
\item weakening is a substitution homomorphism
\item both weakening and substitution are empty-CF homomorphisms.
\item 
\end{enumerate}
\end{defn}
